# Инструкция для суперпользователя

## Обзор системы

Платформа реабилитационных центров предоставляет суперпользователю полный доступ ко всем функциям системы. Суперпользователь может управлять пользователями, контентом, заявками, настройками системы и просматривать все логи действий.

## Вход в систему

### Данные для входа

- **URL админ-панели:** `http://localhost:8000/admin/`
- **Email:** `admin@admin.com`
- **Пароль:** `123456`

**Важно:** Вход осуществляется по email, а не по username!

### Создание нового суперпользователя

Если нужно создать нового суперпользователя:

```bash
python manage.py shell -c "from users.models import User; user = User.objects.create_user(username='admin', email='admin@example.com', password='123456'); user.is_superuser = True; user.is_staff = True; user.role = 'superuser'; user.save(); print(f'Создан суперпользователь: {user.email}')"
```

## Основные разделы админ-панели

### 1. Пользователи (Users)

#### Управление пользователями

- **Просмотр всех пользователей:** Список всех зарегистрированных пользователей
- **Создание пользователей:** Добавление новых пользователей с различными ролями
- **Редактирование профилей:** Изменение данных пользователей
- **Управление ролями:** Назначение ролей (суперпользователь, администратор контента, администратор заявок, пользователь)

#### Роли пользователей

- **Суперпользователь** - полный доступ ко всем функциям
- **Администратор контента** - управление контентом сайта
- **Администратор заявок** - обработка заявок пользователей
- **Пользователь** - базовый доступ

#### Специальные функции

- **Просмотр только персонала:** `/admin/users/user/staff-users/` - показывает только администраторов
- **Логи действий пользователей:** Отслеживание всех действий пользователей в системе

### 2. Система доступа (Admin Logs)

#### Уровни доступа (Access Levels)

- **Создание уровней доступа:** Настройка различных уровней прав
- **Управление разрешениями:** Назначение прав для каждого уровня
- **Активация/деактивация:** Включение и отключение уровней доступа

#### Разрешения приложений (App Permissions)

- **Просмотр (can_view):** Право на просмотр данных
- **Добавление (can_add):** Право на создание новых записей
- **Изменение (can_change):** Право на редактирование
- **Удаление (can_delete):** Право на удаление
- **Назначение ответственных (can_assign_responsible):** Право назначать ответственных
- **Изменение статуса (can_change_status):** Право изменять статусы

#### Доступы пользователей (User Access)

- **Назначение доступа:** Предоставление пользователям определенных уровней доступа
- **Временные ограничения:** Установка сроков действия доступа
- **Отслеживание назначений:** Кто и когда предоставил доступ

#### Логи действий администраторов (Admin Action Log)

- **Просмотр всех действий:** Все изменения в системе
- **Фильтрация по пользователям:** Действия конкретных пользователей
- **Фильтрация по приложениям:** Действия в определенных модулях
- **IP-адреса:** Отслеживание IP-адресов для безопасности

### 3. Заявки (Requests)

#### Управление заявками

- **Просмотр всех заявок:** Список всех заявок с фильтрацией
- **Обработка заявок:** Изменение статусов, назначение ответственных
- **Добавление заметок:** Внутренние заметки по заявкам
- **История изменений:** Полная история всех изменений заявки

#### Статусы заявок

- **Новая** - только что созданная заявка
- **В обработке** - заявка обрабатывается
- **Назначен ответственный** - заявка передана специалисту
- **Завершена** - заявка обработана
- **Закрыта** - заявка закрыта
- **Лечение завершено** - лечение успешно завершено

#### Шаблоны заявок (Request Templates)

- **Создание шаблонов:** Шаблоны для быстрого создания заявок
- **Управление типами:** Различные типы шаблонов
- **Активация/деактивация:** Включение и отключение шаблонов

#### Отчеты

- **Печать отчетов:** Генерация подробных отчетов по заявкам
- **Расширенные отчеты:** Дополнительная информация для суперпользователей
- **Статистика обработки:** Время обработки заявок

### 4. Медицинские учреждения (Facilities)

#### Управление учреждениями

- **Добавление учреждений:** Создание новых реабилитационных центров, клиник и частных врачей
- **Редактирование профилей:** Обновление информации об учреждениях
- **Управление услугами:** Настройка предоставляемых услуг
- **Фотогалереи:** Управление изображениями учреждений

#### Типы учреждений

- **Клиники** - стационарные и амбулаторные учреждения с экстренной помощью
- **Реабилитационные центры** - специализированные центры для длительной реабилитации
- **Частные врачи** - индивидуальные специалисты с персональными профилями

#### Специалисты (Staff)

- **Добавление специалистов:** Создание профилей врачей и специалистов
- **Специализации:** Управление медицинскими специализациями
- **Привязка к учреждениям:** Назначение специалистов в учреждения

### 5. Контент

#### Блог

- **Создание статей:** Публикация новых статей
- **Управление категориями:** Создание и редактирование категорий
- **Модерация комментариев:** Управление комментариями пользователей

#### Истории выздоровления (Recovery Stories)

- **Публикация историй:** Добавление историй успешного лечения
- **Управление категориями:** Категоризация историй
- **Модерация контента:** Проверка и одобрение историй

#### Отзывы (Reviews)

- **Модерация отзывов:** Проверка и публикация отзывов
- **Управление рейтингами:** Контроль качества отзывов
- **Ответы на отзывы:** Возможность отвечать на отзывы от имени учреждения

### 6. Настройки сайта (Content)

#### Баннеры

- **Создание баннеров:** Добавление рекламных баннеров
- **Управление расписанием:** Настройка времени показа баннеров
- **Порядок отображения:** Настройка последовательности показа

#### Настройки сайта

- **Основные настройки:** Контактная информация, описание сайта
- **SEO-настройки:** Мета-теги, ключевые слова
- **Социальные сети:** Ссылки на социальные сети

## Безопасность и мониторинг

### Логирование действий

Все действия суперпользователя автоматически записываются в логи:

- **Время действия:** Точное время выполнения операции
- **IP-адрес:** Адрес, с которого выполнено действие
- **Пользователь:** Кто выполнил действие
- **Объект:** Над каким объектом выполнено действие
- **Изменения:** Что именно было изменено

### Мониторинг системы

- **Активные пользователи:** Кто сейчас работает в системе
- **Последние действия:** Недавние изменения в системе
- **Ошибки и предупреждения:** Системные уведомления

## Рекомендации по работе

### Ежедневные задачи

1. **Проверка новых заявок** - обработка входящих заявок
2. **Модерация контента** - проверка новых отзывов и историй
3. **Проверка логов** - мониторинг активности пользователей
4. **Резервное копирование** - создание резервных копий данных

### Еженедельные задачи

1. **Анализ статистики** - просмотр отчетов по активности
2. **Обновление контента** - добавление новых статей и историй
3. **Проверка безопасности** - анализ логов на подозрительную активность
4. **Обновление настроек** - корректировка параметров системы

### Ежемесячные задачи

1. **Аудит пользователей** - проверка активности пользователей
2. **Очистка логов** - архивирование старых логов
3. **Обновление системы** - применение обновлений
4. **Анализ производительности** - оптимизация работы системы

## Команды управления

### Создание резервной копии

```bash
python manage.py dumpdata > backup.json
```

### Восстановление из резервной копии

```bash
python manage.py loaddata backup.json
```

### Создание тестовых данных

```bash
python manage.py shell -c "from facilities.management.commands.create_fake_data import Command; Command().handle()"
```

### Проверка системы

```bash
python manage.py check
python manage.py check --deploy
```

## Поддержка

При возникновении проблем:

1. Проверьте логи в разделе "Admin Action Log"
2. Убедитесь в корректности настроек
3. Обратитесь к документации проекта
4. Создайте резервную копию перед внесением изменений

## Контакты

- **Email поддержки:** support@rehabs-platform.com
- **Документация:** `/docs/`
- **GitHub:** https://github.com/Serg-Geek/project_rehabs_platform
